<?xml version="1.0" encoding="UTF-8"?>
<idea-plugin>
    <id>cn.ilikexff.codepins</id>
    <name>CodePins - Code Bookmarks</name>
    <vendor email="ilikexff@gmail.com" url="https://github.com/08820048/codepins-intellij-plugin">ilikexff</vendor>
    <version>1.1.1</version>
    
    <!-- 插件兼容性信息 -->
    <idea-version since-build="231" until-build="241.*"/>
    
    <!-- 插件分类标签 -->
    <category>Navigation</category>
    <category>Code Tools</category>
    
    <!-- 简短描述 -->
    <description><![CDATA[
        <h2>CodePins - 智能代码图钉</h2>
        <p>一款现代化的代码标记工具，帮助您在复杂项目中快速定位和管理重要代码位置。</p>
        
        <h3>主要功能</h3>
        <ul>
            <li><b>📌 代码标记</b>：将任意代码行或代码块添加为图钉，随时快速返回查看</li>
            <li><b>📝 添加备注</b>：为每个图钉添加自定义备注，记录重要信息</li>
            <li><b>🔍 快速搜索</b>：通过文件名、路径或备注内容快速查找图钉</li>
            <li><b>👁️ 代码预览</b>：悬停查看图钉详情，无需离开当前编辑位置</li>
            <li><b>🔄 自动更新</b>：图钉位置会随着代码编辑自动更新，始终保持准确</li>
            <li><b>💾 持久化保存</b>：图钉信息在IDE重启后依然保留</li>
        </ul>
        
        <h3>使用方法</h3>
        <ol>
            <li>在编辑器中右键点击代码行，选择 "Pin This Line"</li>
            <li>在左侧工具窗口中查看和管理所有图钉</li>
            <li>双击图钉可快速跳转到对应代码位置</li>
            <li>右键点击图钉可查看更多操作选项</li>
        </ol>
        
        <p><b>CodePins</b> 让您在复杂代码库中的导航变得轻松高效，是开发者必备的生产力工具！</p>
    ]]></description>
    
    <!-- 插件更新日志 -->
    <change-notes><![CDATA[
        <h3>版本 1.1.1</h3>
        <ul>
            <li>改进悬浮预览功能，解决线程安全问题</li>
            <li>优化代码预览UI，动态调整高度适应代码行数</li>
            <li>全面美化图钉列表项，采用现代卡片式设计</li>
            <li>添加空状态视图，提供友好的引导信息</li>
            <li>改进搜索框，增强视觉反馈和用户体验</li>
        </ul>
        
        <h3>版本 1.0.0</h3>
        <ul>
            <li>初始版本发布</li>
            <li>支持添加、删除、搜索和管理代码图钉</li>
            <li>支持代码块和单行代码的标记</li>
            <li>添加现代化UI设计和用户体验优化</li>
            <li>支持图钉备注和快速预览功能</li>
        </ul>
    ]]></change-notes>
    
    <depends>com.intellij.modules.platform</depends>

    <extensions defaultExtensionNs="com.intellij">
        <toolWindow id="CodePins"
                    anchor="left"
                    factoryClass="cn.ilikexff.codepins.PinsToolWindow"
                    icon="/icons/logo.svg"
        />

        <!-- ✅ 正确位置，注册服务类 -->
        <applicationService serviceImplementation="cn.ilikexff.codepins.PinStateService"/>
    </extensions>

    <actions>
        <action id="CodePins.PinAction"
                class="cn.ilikexff.codepins.PinAction"
                text="Pin This Line"
                description="Pin current line for later reference"
                icon="/icons/logo.svg">
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>
        </action>
    </actions>
</idea-plugin>
