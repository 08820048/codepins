# CodePins – IntelliJ 插件介绍

CodePins 是一款功能强大的 IntelliJ IDEA 插件，致力于通过智能代码图钉和现代化管理界面，帮助开发者高效组织和导航代码。

## 完全免费开源！

**CodePins 现在完全免费开源！** 所有功能对所有用户开放，无任何限制。如果这个插件对您有帮助，请考虑：

- **给项目点 Star**：[GitHub 仓库](https://github.com/08820048/codepins)
- **请我们喝咖啡**：[捐赠支持](https://docs.codepins.cn/donate)
-  **参与贡献**：查看 [贡献指南](https://github.com/08820048/codepins/blob/main/CONTRIBUTING.md)



## 核心功能

- **无限制的智能书签**：无限图钉数量，标签系统，智能备注
-  **高效导航**：快捷键导航，即时预览，智能搜索
-  **现代化界面**：美观设计，拖拽排序，卡片式布局，彩色图标
-  **代码注释集成**：通过注释标记添加图钉，支持标签和行号范围
-  **标签系统**：使用标签组织和筛选图钉，提高工作效率
-  **AI智能建议**：智能代码分析，上下文感知的改进建议
-  **Git集成功能**：版本追踪，差异分析，智能建议生成
-  **模板系统**：预定义模板，变量替换，快速创建图钉
-  **数据管理**：自动同步，导入导出，持久化存储
-  **团队协作**：导入/导出功能，便于团队共享

## 安装

### 从 JetBrains Marketplace 安装

1. 在 IDE 中，前往 `Settings/Preferences` → `Plugins` → `Marketplace`
2. 搜索 "CodePins"
3. 点击 `Install`

### 手动安装

1. 从 [JetBrains Marketplace](https://plugins.jetbrains.com/plugin/27300-codepins--code-bookmarks) 下载 `.zip` 文件
2. 在 IDE 中，前往 `Settings/Preferences` → `Plugins` → `⚙️` → `Install Plugin from Disk...`
3. 选择下载的 `.zip` 文件

更多使用技巧和详细指南请参考[详细文档](https://docs.codepins.cn/)

## 基本功能

### 添加您的第一个图钉

有多种方式可以将代码标记为图钉：

1.  **右键点击**：在编辑器中，右键点击您想标记的代码行，选择 `Add CodePin Here`。

![image-20250821180557304](https://images.waer.ltd/notes/202508211806573.png)

1.  **使用快捷键**：
    *   Windows/Linux: `Alt+Shift+P`
    *   Mac: `Option+Shift+P`
2.  **浮动按钮**：选中一段代码后，点击旁边出现的浮动图钉按钮。

![image-20250821180723431](https://images.waer.ltd/notes/202508211807494.png)

> 这种方式快捷添加的图钉会添加一个没有备注，没有标签的图钉到图钉列表，你可以通过列表中对图钉进行再次编辑。

如果你希望通过这种方式添加图钉时弹出备注和标签添加框，可以通过设置面板开启这个功能

![image-20250821180933812](https://images.waer.ltd/notes/202508211809889.png)



1. **注释标记**：在代码中添加特定格式的注释，例如：

    *   `// @cp 这是我的备注 #重要 #待办 结束符`

   > - 注意，结束符是代表该条指令结束的意思，系统只有在你输入结束符之后才会触发添加图钉的流程。这个指令是一个单行代码图钉指令，也就是说，指令执行之后最终添加到图钉面板，后续通过该图钉跳转代码的位置会直接跳转到这个指令得行，相当于一个简单的to-do功能，他不会包含任何代码内容。
   > - 在最新的版本中，默认结束符是 **@**，可以通过设置页面自定义。

   ![image-20250821182111450](https://images.waer.ltd/notes/202508211821561.png)

   ---

    *   `//@cpbn-m 备注信息 #标签1 #标签 结束符`

> 和上一个 **@cp**指令不同。这个指令可以添加指定行号范围的代码块图钉。注意指令代码为 **@cpb**后面跟随的n-m代表要添加的代码块起始和结束的行号，再往后就是备注和标签信息以及最后的结束符。

![image-20250821182608971](https://images.waer.ltd/notes/202508211826049.png)

通过这种方式添加的代码块，当我们双击图钉的时候会自动跳转到对应代码文件中对应代码块的位置，并且会自动选中被标记的代码块内容。

![image-20250821182835198](https://images.waer.ltd/notes/202508211828254.png)

> 至于使用哪一种添加方式，取决于个人喜欢和具体的应用需求。

### 图钉管理

CodePins 工具窗口（可通过 `视图 -> 工具窗口 -> CodePins` 或 IDE 右侧边栏打开）提供了各种管理图钉的方式。工具窗口包含四个主要选项卡，每个都有现代化的彩色图标：

- **图钉列表**（蓝色图钉图标）：主要的图钉管理界面
- **统计信息**（绿色柱状图图标）：图钉使用统计和分析
- **智能建议**（紫色AI大脑图标）：AI驱动的代码改进建议
- **Git集成**（橙色分支图标）：版本控制和变更分析

![image-20250821183049518](https://images.waer.ltd/notes/202508211830578.png)

1. **查看图钉**

    *   所有图钉将以卡片式或列表形式显示。
    *   单击或双击图钉（取决于您的设置）即可导航到其在代码中的位置。
    *   鼠标悬停通常可以预览图钉周围的代码片段。

2. **编辑图钉**

    *   双击图钉卡片或右键选择编辑，可以修改其备注、标签等信息。
    *   右键点击图钉可查看更多操作选项，如删除、复制信息等。
    *   支持拖拽排序来重新组织图钉的顺序。

   ![image-20250821183433319](https://images.waer.ltd/notes/202508211834373.png)

3. **搜索和筛选**

    *   使用工具窗口顶部的搜索框，可以根据备注、文件名、标签等关键词快速查找特定图钉。
    *   利用标签系统筛选图钉，只显示包含特定标签的图钉。
    *   通常可以按不同标准（如创建时间、文件名）对图钉进行排序。

   ![image-20250821183615236](https://images.waer.ltd/notes/202508211836295.png)

   ![image-20250821183520813](https://images.waer.ltd/notes/202508211835866.png)

### 添加备注和标签

每个图钉都可以包含丰富的信息以帮助您记忆和组织：

1.  **描述性备注**：为图钉添加详细的文字说明，解释标记该代码的原因、待办事项等。
2.  **多个标签**：使用标签对图钉进行分类，例如 `#bug`, `#feature`, `#refactor`, `#todo`。一个图钉可以拥有多个标签。
3.  **自定义颜色**（如果支持）：某些图钉系统可能允许为图钉设置颜色以便视觉区分。

编辑图钉信息的方法：

1.  在 CodePins 工具窗口中找到目标图钉。
2.  双击或通过右键菜单进入编辑模式。
3.  在相应的输入框中添加或修改备注。
4.  使用标签编辑器添加、删除或创建新标签。
5.  保存更改。

### 图钉组织

CodePins 提供了多种组织图钉的方式，以适应不同的工作流程：

1.  **标签系统**
    *   创建对您有意义的自定义标签（例如 `项目A`, `模块B`, `优先级高`）。
    *   为每个图钉分配一个或多个相关标签。
    *   在工具窗口中点击标签或使用标签筛选器，快速显示所有相关的图钉。

2.  **排序**
    *   按创建时间（最新或最旧）。
    *   按文件名或文件路径。
    *   按备注内容的字母顺序。
    *   自定义顺序（通过拖拽实现）。

3.  **分组**（可能视插件具体实现而定）
    *   按文件自动分组，清晰显示每个文件中的图钉。
    *   按标签分组，将相同标签的图钉聚集在一起。
    *   按项目或模块分组（如果插件支持多项目工作空间或模块化视图）。

## 分享和导出

与团队成员分享您的图钉或在不同设备间同步：

![image-20250821183813882](https://images.waer.ltd/notes/202508211838977.png)

1. **导出选项**

    *   **JSON 格式**：最常用的导出格式，包含图钉的所有信息，便于程序处理和导入。
    *   **Markdown 格式**：将图钉列表导出为 Markdown 文件，适合生成可读的报告或文档。
    *   **CSV/文本格式**：有时也支持导出为简单的文本或 CSV 文件。

   ![image-20250821183840758](https://images.waer.ltd/notes/202508211838807.png)

2. **导入选项**

    *   **从 JSON 文件导入**：从之前导出的 JSON 文件恢复图钉。

   ![image-20250821183910121](https://images.waer.ltd/notes/202508211839166.png)

3. **团队协作与分享**

   > 该功能目前尚处于计划阶段，敬请期待。

---

## 图钉统计

最新的版本中（你看到该部分文档内容时可能最新版还未审核通过）新增了一个 **统计信息**的功能。

![image-20250822114521013](https://images.waer.ltd/notes/202508221145185.png)

---

## 智能建议

该功能可以自动扫描你当前打开的代码文件并检测代码中存在的问题，结合最佳实践给出智能化的图钉建议，这些建议可以通过下方的“应用建议”按钮一键添加到图钉列表，方便后续定位和优化。

![image-20250822114934908](https://images.waer.ltd/notes/202508221149936.png)

在设置页面，我们可以调整一些参数，比如 **智能建议配置**和 **置信度阈值**等。

![image-20250822115618910](https://images.waer.ltd/notes/202508221156983.png)

---

## Git集成功能

CodePins 新增了强大的 Git 集成功能，能够跟踪图钉在版本控制中的变化，并基于代码变更智能生成图钉建议。

### 主要功能

**版本追踪**
- 自动保存图钉状态快照到 Git 提交历史
- 查看图钉在不同版本间的变化
- 比较不同提交之间的图钉差异

**差异分析**
- 智能分析代码变更，检测新增、修改的代码
- 基于变更模式自动生成相关图钉建议
- 识别 TODO 注释、复杂方法、异常处理等模式

**智能建议生成**
- 根据 Git diff 分析代码变更类型
- 为新增代码提供质量检查建议
- 为复杂变更提供审查提醒

### 使用方法

1. 打开 CodePins 工具窗口的"Git集成"选项卡
2. 点击"分析变更"按钮分析当前代码变更
3. 查看基于变更生成的智能建议
4. 选择建议并一键创建图钉
5. 使用"保存快照"功能记录当前图钉状态

### 建议类型

- **新增代码**：为新增的方法和类提供文档建议
- **复杂变更**：标记需要仔细审查的复杂逻辑
- **潜在问题**：识别可能的 bug 和性能问题
- **审查需要**：标记需要团队审查的重要变更

---

## 图钉模板

CodePins 提供了强大的模板系统，让您能够快速创建标准化的图钉。模板支持变量替换，能够自动填入日期、作者、文件名等信息。

![image-20250822115810601](https://images.waer.ltd/notes/202508221158675.png)

### 预定义模板

系统内置了多种常用模板：

- **TODO**：标记待完成的任务
- **FIXME**：标记需要修复的问题
- **NOTE**：添加重要说明
- **BUG**：标记已知的 bug
- **OPTIMIZE**：标记需要优化的代码
- **REVIEW**：标记需要审查的代码

### 模板变量

模板支持以下变量替换：

- `${DATE}`：当前日期
- `${TIME}`：当前时间
- `${AUTHOR}`：当前用户名
- `${FILE_NAME}`：当前文件名
- `${LINE_NUMBER}`：当前行号

### 自定义模板

您可以在设置页面创建自己的模板：

![image-20250822115838545](https://images.waer.ltd/notes/202508221158621.png)

1. 打开 CodePins 设置页面
2. 切换到"模板管理"选项卡
3. 点击"添加模板"创建新模板
4. 设置模板名称、内容和默认标签
5. 保存后即可在右键菜单中使用















## 技巧和最佳实践

1.  **高效导航**
    *   熟练使用快捷键 (`Alt+Shift+P` 或 `Option+Shift+P`) 快速创建图钉。
    *   为常用操作（如打开工具窗口、导航到下一个/上一个图钉）配置或学习快捷键。
    *   使用有意义、一致的标签和清晰的备注，方便未来自己或他人理解。

2.  **团队协作**
    *   在进行代码审查时，使用图钉配合评论来精确指出问题点。
    *   共享一套针对特定任务（如重构、bug修复）的图钉集。
    *   在团队内部约定标签使用规范，提高协作效率。

3.  **项目管理**
    *   使用图钉标记 `TODO` 项、`FIXME` 注释或需要后续跟踪的问题。
    *   在研究复杂代码库时，用图钉标记关键的函数、类或逻辑分支，作为探索路径的记录。
    *   标记重要的实现细节或需要回顾的设计决策点。

## 故障排除

### 常见问题

**Q: 图钉位置不匹配或偏移怎么办？**
A: 这通常是由于代码变更（如添加/删除行）导致的图钉原始行号不再准确。CodePins 通常会尝试自动调整，但有时可能需要手动干预：

1.  尝试使用工具窗口中的“刷新”或“同步”按钮（如果提供）。
2.  如果某个图钉持续指向错误位置，可以考虑删除并重新在该代码行添加图钉。
3.  确保插件已更新到最新版本，因为新版本可能包含针对此类问题的改进。

**Q: 如何在版本控制中处理图钉？**
A: CodePins 的图钉数据默认存储在您的本地 IntelliJ IDEA 配置中（通常在项目 `.idea` 目录或全局配置目录）。

*   **个人使用**：通常不需要将图钉数据提交到版本控制。
*   **团队共享**：
    1.  使用插件的“导出”功能将图钉数据保存到一个文件（如 `codepins_export.json`）。
    2.  可以将此导出的文件添加到版本控制系统中（如 Git）。
    3.  团队成员可以获取该文件，并使用插件的“导入”功能将其载入自己的 IDE。
    4.  注意：共享的图钉在不同用户的本地代码副本中可能因代码差异而需要调整。

## 支持和社区

如果您在使用 CodePins 过程中遇到任何问题、有功能建议或希望参与贡献，可以通过以下渠道联系我们：

1.  **GitHub Issues**:
    *   [报告 Bug](https://github.com/08820048/codepins/issues)：如果您发现了插件的错误或问题。
    *   [功能请求](https://github.com/08820048/codepins/issues)：如果您希望 CodePins 增加新功能。
    *   参与讨论和开发。

2.  **官方文档**:
    *   访问 [docs.codepins.cn](https://docs.codepins.cn/) 获取最全面的使用指南、教程和常见问题解答。

3.  **社区与联系** (具体渠道请参考 CodePins 官方信息，以下为通用示例)
    *   邮件联系：`ilikexff@gmail.com`
    *   QQ 交流群: `156892538`

## 更新和更新日志

为了获得最佳体验和最新功能，请保持 CodePins 插件的更新：

1.  **IDE 内更新**：IntelliJ IDEA 会自动检查已安装插件的更新。您可以在 `Settings/Preferences` → `Plugins` → `Installed` 标签页查看并更新 CodePins。

### 最新版本 v2.2.0 更新内容

**AI智能建议系统**
- 全新的AI驱动代码质量检测和改进建议
- 上下文感知技术，智能识别注解参数、配置常量等合理场景
- 自动过滤CodePins特殊注释，避免误报干扰
- 增强的魔法数字检测，排除HTTP状态码、端口号等常见数字

**Git集成功能**
- 完整的图钉版本追踪系统，记录Git提交历史中的变化
- 智能分析代码变更，自动生成相关图钉建议
- 基于Git diff检测TODO、复杂方法、异常处理等模式
- 图钉状态快照管理，支持版本回溯和比较

**界面优化**
- 现代化彩色图标设计，提升视觉体验
- 蓝色主题图钉列表图标
- 绿色主题统计信息图标
- 紫色主题智能建议图标
- 橙色主题Git集成图标

**性能改进**
- 优化渲染和分析性能
- 增强代码结构和可维护性
- 异步处理，不阻塞UI操作
- 修复图标显示问题和编译兼容性
2.  **关注官方渠道**：
    *   [GitHub 仓库](https://github.com/08820048/codepins)：关注 Release 页面获取更新信息。
    *   [CHANGELOG.md](https://github.com/08820048/codepins/blob/main/CHANGELOG.md)：查看详细的版本更新历史和修复内容。

感谢您选择 CodePins！我们希望它能显著提升您的编程效率和代码管理体验。